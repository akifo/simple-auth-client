{"version":3,"file":"simple-auth-client.min.js","sources":["../src/scripts/main.js"],"sourcesContent":["/* @flow */\n\n/* Import modules\n-------------------------------------------------------------- */\nimport tpl from '../html/main.html';\nimport '../styles/main.css';\n\n/* Settings\n-------------------------------------------------------------- */\nconst SAC_WRAP_ID:string = '_____SAC_____Wrap';\nconst SAC_PASS_ID:string = '_____SAC_____Password';\n\n/* Only developement Enable LiveReload\n-------------------------------------------------------------- */\nif (ENV !== 'production') {\n  document.write('<script src=\"http://' + (location.host || 'localhost').split(':')[0] +\n  ':35729/livereload.js?snipver=1\"></' + 'script>')  ;\n}\n\n/* flow types\n-------------------------------------------------------------- */\ntype PropOptions = {\n  password?: string | number | Array<string>,\n  style?: string\n}\n\n/* Variables\n-------------------------------------------------------------- */\nlet settings:PropOptions = {\n  password: 'test',\n  style: 'basic'\n};\nlet $SAC:HTMLElement;\n\n/* Functions\n-------------------------------------------------------------- */\n// success auth\nconst removeAuthView = () => {\n\n  console.log('success auth aaa');\n\n  // remove auth view\n  $SAC.remove();\n\n  // set localstrage in 10 minutes\n\n};\n\n// dialog\nconst dialog = (result, msg) => {\n  console.log('auth dialog', result, msg);\n};\n\n// create SimpleAuthClient Element to DOM\nconst createSacElement = () => {\n  $SAC = document.createElement('div');\n  $SAC.id = SAC_WRAP_ID;\n  $SAC.innerHTML = tpl;\n  document.body.appendChild($SAC);\n};\n\n/* export object\n-------------------------------------------------------------- */\nconst SimpleAuthClient = {\n\n  password: [],\n\n  start (options?: PropOptions) {\n\n    // Merge options\n    Object.assign(settings, options);\n\n    // script was loaded at the head of document\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', function() {\n        createSacElement();\n      });\n\n    } else { // script was loaded at the end of document\n      createSacElement();\n      console.warn('SimpleAuthClient should load at head element');\n    }\n\n    // Password to Array\n    if (typeof settings.password === 'string') this.password.push(settings.password);\n    else if (typeof settings.password === 'number') this.password.push(settings.password.toString());\n    else if (Array.isArray(settings.password)) Object.assign(this.password, settings.password);\n    console.log(this.password);\n\n  },\n\n  submit () {\n    const target =document.getElementById(SAC_PASS_ID);\n    if (!(target instanceof HTMLInputElement)) return;\n    var password = target.value.trim();\n    if (this.password.includes(password)) {\n      removeAuthView();\n      return false;\n    }\n    dialog(false, 'failed');\n    return false;\n  }\n};\n\nexport default SimpleAuthClient;\n"],"names":["SAC_WRAP_ID","SAC_PASS_ID","settings","$SAC","removeAuthView","log","remove","dialog","result","msg","createSacElement","document","createElement","id","innerHTML","tpl","body","appendChild","SimpleAuthClient","options","assign","readyState","addEventListener","warn","password","this","push","toString","Array","isArray","Object","target","getElementById","HTMLInputElement","value","trim","includes"],"mappings":";;;;;g+IASA,IAAMA,GAAqB,oBACrBC,EAAqB,wBAkBvBC,YACQ,aACH,SAELC,SAKEC,EAAiB,mBAEbC,IAAI,sBAGPC,UAODC,EAAS,SAACC,EAAQC,WACdJ,IAAI,cAAeG,EAAQC,IAI/BC,EAAmB,aAChBC,SAASC,cAAc,SACzBC,GAAKb,IACLc,UAAYC,WACRC,KAAKC,YAAYd,IAKtBe,8BAIGC,UAGEC,OAAOlB,EAAUiB,GAGI,YAAxBR,SAASU,oBACFC,iBAAiB,mBAAoB,8BAMtCC,KAAK,iDAIkB,gBAAtBrB,GAASsB,SAAuBC,KAAKD,SAASE,KAAKxB,EAASsB,UACjC,gBAAtBtB,GAASsB,SAAuBC,KAAKD,SAASE,KAAKxB,EAASsB,SAASG,YAC5EC,MAAMC,QAAQ3B,EAASsB,WAAWM,OAAOV,OAAOK,KAAKD,SAAUtB,EAASsB,kBACzEnB,IAAIoB,KAAKD,gCAKXO,GAAQpB,SAASqB,eAAe/B,MAChC8B,YAAkBE,sBACpBT,GAAWO,EAAOG,MAAMC,aACxBV,MAAKD,SAASY,SAASZ,SAElB,OAEF,EAAO,WACP"}